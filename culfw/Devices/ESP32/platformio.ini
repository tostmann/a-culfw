[platformio]
src_dir = .

; -------------------------------------------------------------------------
; ESP32-C3 CONFIGURATION
; -------------------------------------------------------------------------

[env:ESP32-C3]
platform = espressif32
board = esp32-c3-devkitm-1
framework = arduino
monitor_speed = 115200

; Flash settings for better compatibility (use DIO for C3)
board_build.flash_mode = dio
board_build.f_flash = 40000000L

extra_scripts = 
    pre:scripts/increment_version.py
    post:scripts/merge_bin.py
    post:scripts/collect_binaries.py

build_flags = 
    -DESP32_C3
    -DUSE_HAL
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DHAS_CC1100
    -I Devices/ESP32
    -I .
    -I clib
    -I clib/mbus
    -I ESP32
    -I ESP32/avr
    -I ESP32/utility

build_src_filter =
    +<Devices/ESP32/main.cpp>
    +<ESP32/hal.cpp>
    +<clib/cc1100.c>
    +<clib/cc1101_pllcheck.c>
    +<clib/clock.c>
    +<clib/display.c>
    +<clib/fastrf.c>
    +<clib/fband.c>
    +<clib/fht.c>
    +<clib/fncollection.c>
    +<clib/hw_autodetect.c>
    +<clib/intertechno.c>
    +<clib/kopp-fc.c>
    +<clib/multi_CC.c>
    +<clib/rf_asksin.c>
    +<clib/rf_maico.c>
    +<clib/rf_mbus.c>
    +<clib/mbus/*.c>
    +<clib/rf_mode.c>
    +<clib/rf_moritz.c>
    +<clib/rf_native.c>
    +<clib/lacrosse.c>
    +<clib/rf_router.c>
    +<clib/rf_receive_bucket.c>
    +<clib/rf_receive_esa.c>
    +<clib/rf_receive_hms.c>
    +<clib/rf_receive_it.c>
    +<clib/rf_receive_revolt.c>
    +<clib/rf_receive_tcm97001.c>
    +<clib/rf_receive_tx3.c>
    +<clib/rf_receive.c>
    +<clib/rf_rwe.c>
    +<clib/rf_send.c>
    +<clib/rf_zwave.c>
    +<clib/ringbuffer.c>
    +<clib/somfy_rts.c>
    +<clib/stringfunc.c>
    +<clib/ttydata.c>
    +<clib/onewire.c>

; -------------------------------------------------------------------------
; XIAO-ESP32-C3 CONFIGURATION
; -------------------------------------------------------------------------

[env:XIAO-ESP32-C3]
platform = espressif32
board = seeed_xiao_esp32c3
framework = arduino
monitor_speed = 115200

; Flash settings for better compatibility
board_build.flash_mode = dio
board_build.f_flash = 40000000L

extra_scripts = 
    pre:scripts/increment_version.py
    post:scripts/merge_bin.py
    post:scripts/collect_binaries.py

build_flags = 
    -DESP32_C3
    -DUSE_HAL
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DHAS_CC1100
    -DBOARD_NAME=\"XIAO-ESP32-C3\"
    -DBOARD_ID_STR=\"XIAO-ESP32-C3\"
    -DSPI_SCLK=6
    -DSPI_MISO=10
    -DSPI_MOSI=7
    -DSPI_SS=5
    -DCC1100_CS_PIN=5
    -DGDO0_PIN=3
    -DGDO2_PIN=4
    -DLED_PIN=21
    -I Devices/ESP32
    -I .
    -I clib
    -I clib/mbus
    -I ESP32
    -I ESP32/avr
    -I ESP32/utility

build_src_filter =
    ${env:ESP32-C3.build_src_filter}

; -------------------------------------------------------------------------
; ESP32-C6 CONFIGURATION
; -------------------------------------------------------------------------

[env:ESP32-C6]
platform = espressif32
board = esp32-c6-devkitc-1
framework = arduino
monitor_speed = 115200

; Flash settings for better compatibility
board_build.flash_mode = dio
board_build.f_flash = 40000000L

extra_scripts = 
    pre:scripts/increment_version.py
    post:scripts/merge_bin.py
    post:scripts/collect_binaries.py

build_flags = 
    -DESP32_C6
    -DUSE_HAL
    -DARDUINO_USB_MODE=1
    -DARDUINO_USB_CDC_ON_BOOT=1
    -DHAS_CC1100
    -I Devices/ESP32
    -I .
    -I clib
    -I clib/mbus
    -I ESP32
    -I ESP32/avr
    -I ESP32/utility

build_src_filter =
    ${env:ESP32-C3.build_src_filter}
